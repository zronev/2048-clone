{"version":3,"sources":["components/NewGameButton.js","components/ModalLost.js","components/Cell.js","components/UndoButton.js","components/Score.js","helpers/utility.js","helpers/cell.js","helpers/moves.js","helpers/checks.js","helpers/useLocalStorage.js","components/Grid.js","components/Footer.js","App.js","index.js"],"names":["NewGameButton","newGame","parent","onClick","className","ModalLost","isOpen","Cell","cell","value","UndoButton","handleUndoClick","Score","score","bestScore","arrayClone","arr","JSON","parse","stringify","arraysEqual","arr1","arr2","newArr1","map","row","newArr2","emptyCell","this","randomCell","Math","floor","random","column","spawnRandomCell","grid","count","moveUp","newGrid","rotate","newScore","flip","move","translate","moveDown","moveLeft","moveRight","slide","merge","modifiedArr","filter","zeros","Array","length","fill","i","reverse","rotatedGrid","col","translatedGrid","useLocalStorage","key","initialValue","useState","item","window","localStorage","getItem","error","console","log","storedValue","setStoredValue","valueToStore","Function","setItem","Grid","inititalState","gridRef","useRef","setGrid","setScore","setBestScore","isBestScoreInCurrentGame","setIsBestScoreInCurrentGame","lastTurnGrid","setLastTurnGrid","lastTurnScore","setLastTurnScore","modalIsOpen","setModalIsOpen","useCallback","gridClone","spawnTwoRandomCells","useEffect","checkIsGridEmpty","updateBestScore","checkIsGridFull","checkUp","checkDown","checkLeft","checkRight","gridNode","current","roundScore","xDown","yDown","handleTouchStart","e","firstTouch","touches","getTouches","clientX","clientY","handleTouchMove","preventDefault","xUp","yUp","xDiff","yDiff","abs","handleKeyDown","keyCode","direction","round","document","addEventListener","removeEventListener","ref","Footer","href","target","rel","App","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.3fe53e4a.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst NewGameButton = ({ newGame, parent }) => {\r\n  return (\r\n    <button onClick={newGame} className={`button button--new-game ${parent}__restart`}>\r\n      New Game\r\n    </button>\r\n  )\r\n}\r\n\r\nexport default NewGameButton\r\n","import React from 'react'\r\nimport NewGameButton from './NewGameButton'\r\n\r\nconst ModalLost = ({ isOpen, newGame }) => {\r\n  return (\r\n    <div className={`modal ${isOpen ? 'modal--open' : ''}`}>\r\n      <h3 className=\"modal__title\">You lost...</h3>\r\n      <NewGameButton newGame={newGame} parent=\"modal\" />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ModalLost\r\n","import React from 'react'\r\n\r\nconst Cell = ({ cell }) => {\r\n  const {value, className} = cell\r\n\r\n  return (\r\n    <div\r\n      className={`grid__cell grid__cell--${className}\r\n      ${value > 2 && value <= 2048 ? `grid__cell--${value}` : ''}\r\n      ${value > 2048 ? `grid__cell--over-2048` : ''}`}\r\n    >\r\n      {value ? value : ''}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Cell\r\n","import React from 'react'\r\n\r\nconst UndoButton = ({ handleUndoClick }) => {\r\n  return (\r\n    <button onClick={handleUndoClick} className=\"button game-info__undo\">\r\n      Undo\r\n    </button>\r\n  )\r\n}\r\n\r\nexport default UndoButton\r\n","import React from 'react'\r\n\r\nconst Score = ({ score, bestScore }) => {\r\n  return (\r\n    <div className=\"score-bar\">\r\n      <span className=\"score\">\r\n        <span className=\"score__title\">Score</span>\r\n        <span className=\"score__number\">{score}</span>\r\n      </span>\r\n      <span className=\"score score--best\">\r\n        <span className=\"score__title\">Best</span>\r\n        <span className=\"score__number\">{bestScore}</span>\r\n      </span>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Score\r\n","export const arrayClone = arr => JSON.parse(JSON.stringify(arr)); // to deep clone matrix\r\n\r\nexport const arraysEqual = (arr1, arr2) => {\r\n  const newArr1 = arr1.map(row => row.map(cell => cell.value))\r\n  const newArr2 = arr2.map(row => row.map(cell => cell.value))\r\n\r\n  return JSON.stringify(newArr1) === JSON.stringify(newArr2);\r\n};\r\n","export class emptyCell {\r\n  constructor() {\r\n    this.value = 0;\r\n    this.className = 'empty';\r\n  }\r\n}\r\n\r\nclass randomCell {\r\n  constructor() {\r\n    this.row = Math.floor(Math.random() * Math.floor(4));\r\n    this.column = Math.floor(Math.random() * Math.floor(4));\r\n    this.value = Math.random() > 0.9 ? 4 : 2;\r\n    this.className = 'emerged';\r\n  }\r\n}\r\n\r\nexport const spawnTwoRandomCells = grid => {\r\n  let count = 0;\r\n  while (count < 2) {\r\n    const cell = new randomCell();\r\n\r\n    if (!grid[cell.row][cell.column].value) {\r\n      grid[cell.row][cell.column] = cell;\r\n      count++;\r\n    }\r\n  }\r\n};\r\n\r\nexport const spawnRandomCell = grid => {\r\n  let count = 0;\r\n  while (count < 1) {\r\n    const cell = new randomCell();\r\n\r\n    if (!grid[cell.row][cell.column].value) {\r\n      grid[cell.row][cell.column] = cell;\r\n      count++;\r\n    }\r\n  }\r\n};\r\n","import { arrayClone } from './utility';\r\nimport { emptyCell } from './cell';\r\n\r\nexport const moveUp = (grid, score) => {\r\n  // Rotate and flip direction from up to right\r\n  let newGrid = rotate(arrayClone(grid));\r\n  let newScore = score;\r\n  newGrid = flip(newGrid);\r\n\r\n  [newGrid, newScore] = move(newGrid, newScore);\r\n\r\n  // Rotate and flip back\r\n  newGrid = flip(newGrid);\r\n  newGrid = translate(newGrid);\r\n  return [newGrid, newScore];\r\n};\r\n\r\nexport const moveDown = (grid, score) => {\r\n  // Rotate direction from down to right\r\n  let newGrid = arrayClone(grid);\r\n  let newScore = score;\r\n  newGrid = rotate(newGrid);\r\n\r\n  [newGrid, newScore] = move(newGrid, newScore);\r\n\r\n  // Rotate back\r\n  newGrid = translate(newGrid);\r\n  return [newGrid, newScore];\r\n};\r\n\r\nexport const moveLeft = (grid, score) => {\r\n  // Flip direction from left to right\r\n  let newGrid = flip(arrayClone(grid));\r\n  let newScore = score;\r\n\r\n  [newGrid, newScore] = move(newGrid, newScore);\r\n\r\n  // Flip back\r\n  newGrid = flip(newGrid);\r\n  return [newGrid, newScore];\r\n};\r\n\r\nexport const moveRight = (grid, score) => {\r\n  let newGrid = arrayClone(grid);\r\n  let newScore = score;\r\n\r\n  [newGrid, newScore] = move(newGrid, newScore);\r\n\r\n  return [newGrid, newScore];\r\n};\r\n\r\nconst move = (grid, score) => {\r\n  let newGrid = arrayClone(grid);\r\n  let newScore = score;\r\n\r\n  for (let row = 0; row < 4; row++) {\r\n    newGrid[row] = slide(newGrid[row]);\r\n    [newGrid[row], newScore] = merge(newGrid[row], newScore);\r\n    newGrid[row] = slide(newGrid[row]);\r\n  }\r\n\r\n  return [newGrid, newScore];\r\n};\r\n\r\nconst slide = arr => {\r\n  let modifiedArr = arrayClone(arr);\r\n\r\n  modifiedArr = modifiedArr.filter(cell => cell.value);\r\n  modifiedArr = modifiedArr.map(cell =>\r\n    cell.className !== 'merged' ? { ...cell, className: 'moved' } : cell,\r\n  );\r\n\r\n  const zeros = new Array(4 - modifiedArr.length).fill(new emptyCell(0));\r\n  modifiedArr = [...zeros, ...modifiedArr];\r\n\r\n  return modifiedArr;\r\n};\r\n\r\nconst merge = (arr, score) => {\r\n  let modifiedArr = arrayClone(arr);\r\n  let newScore = score;\r\n\r\n  for (let i = 3; i > 0; i--) {\r\n    if (modifiedArr[i - 1].value === modifiedArr[i].value) {\r\n      modifiedArr[i].value = modifiedArr[i - 1].value * 2;\r\n      modifiedArr[i].className = 'merged';\r\n      modifiedArr[i - 1].value = 0;\r\n      newScore += modifiedArr[i].value;\r\n    }\r\n  }\r\n\r\n  return [modifiedArr, newScore];\r\n};\r\n\r\nconst flip = grid => {\r\n  let modifiedArr = arrayClone(grid);\r\n  return modifiedArr.map(row => row.reverse());\r\n};\r\n\r\nconst rotate = grid => {\r\n  let rotatedGrid = arrayClone(grid);\r\n  for (let row = 0; row < 4; row++) {\r\n    for (let col = 0; col < 4; col++) {\r\n      rotatedGrid[row][col] = grid[col][row];\r\n    }\r\n  }\r\n\r\n  return rotatedGrid;\r\n};\r\n\r\nconst translate = grid => {\r\n  let translatedGrid = arrayClone(grid);\r\n\r\n  translatedGrid = rotate(translatedGrid);\r\n  translatedGrid = rotate(translatedGrid);\r\n  translatedGrid = rotate(translatedGrid);\r\n\r\n  return translatedGrid;\r\n};\r\n","import { arrayClone, arraysEqual } from './utility';\r\nimport { emptyCell } from './cell';\r\n\r\nexport const checkUp = grid => {\r\n  // Rotate and flip direction from up to right\r\n  let newGrid = rotate(arrayClone(grid));\r\n  newGrid = flip(newGrid);\r\n\r\n  newGrid = move(newGrid);\r\n\r\n  // Rotate and flip back\r\n  newGrid = flip(newGrid);\r\n  newGrid = translate(newGrid);\r\n  return arraysEqual(grid, newGrid);\r\n};\r\n\r\nexport const checkDown = grid => {\r\n  // Rotate direction from down to right\r\n  let newGrid = arrayClone(grid);\r\n  newGrid = rotate(newGrid);\r\n\r\n  newGrid = move(newGrid);\r\n\r\n  // Rotate back\r\n  newGrid = translate(newGrid);\r\n  return arraysEqual(grid, newGrid);\r\n};\r\n\r\nexport const checkLeft = grid => {\r\n  // Flip direction from left to right\r\n  let newGrid = flip(arrayClone(grid));\r\n\r\n  newGrid = move(newGrid);\r\n\r\n  // Flip back\r\n  newGrid = flip(newGrid);\r\n  return arraysEqual(grid, newGrid);\r\n};\r\n\r\nexport const checkRight = grid => {\r\n  let newGrid = arrayClone(grid);\r\n  newGrid = move(newGrid);\r\n\r\n  return arraysEqual(grid, newGrid);\r\n};\r\n\r\nconst move = grid => {\r\n  let newGrid = arrayClone(grid);\r\n\r\n  for (let row = 0; row < 4; row++) {\r\n    newGrid[row] = slide(newGrid[row]);\r\n    newGrid[row] = merge(newGrid[row]);\r\n    newGrid[row] = slide(newGrid[row]);\r\n  }\r\n\r\n  return newGrid;\r\n};\r\n\r\nconst slide = arr => {\r\n  let modifiedArr = arrayClone(arr);\r\n\r\n  modifiedArr = modifiedArr.filter(cell => cell.value);\r\n  modifiedArr = modifiedArr.map(cell =>\r\n    cell.className !== 'merged' ? { ...cell, className: 'moved' } : cell,\r\n  );\r\n\r\n  const zeros = new Array(4 - modifiedArr.length).fill(new emptyCell(0));\r\n  modifiedArr = [...zeros, ...modifiedArr];\r\n\r\n  return modifiedArr;\r\n};\r\n\r\nconst merge = arr => {\r\n  let modifiedArr = arrayClone(arr);\r\n\r\n  for (let i = 3; i > 0; i--) {\r\n    if (modifiedArr[i - 1].value === modifiedArr[i].value) {\r\n      modifiedArr[i].value = modifiedArr[i - 1].value * 2;\r\n      modifiedArr[i].className = 'merged';\r\n      modifiedArr[i - 1].value = 0;\r\n    }\r\n  }\r\n\r\n  return modifiedArr;\r\n};\r\n\r\nconst flip = grid => {\r\n  let modifiedArr = arrayClone(grid);\r\n  return modifiedArr.map(row => row.reverse());\r\n};\r\n\r\nconst rotate = grid => {\r\n  let rotatedGrid = arrayClone(grid);\r\n  for (let row = 0; row < 4; row++) {\r\n    for (let col = 0; col < 4; col++) {\r\n      rotatedGrid[row][col] = grid[col][row];\r\n    }\r\n  }\r\n\r\n  return rotatedGrid;\r\n};\r\n\r\nconst translate = grid => {\r\n  let translatedGrid = arrayClone(grid);\r\n\r\n  translatedGrid = rotate(translatedGrid);\r\n  translatedGrid = rotate(translatedGrid);\r\n  translatedGrid = rotate(translatedGrid);\r\n\r\n  return translatedGrid;\r\n};\r\n","import { useState } from \"react\"\r\n\r\nexport const useLocalStorage = (key, initialValue) => {\r\n  // State to store our value\r\n  // Pass initial state function to useState so logic is only executed once\r\n  const [storedValue, setStoredValue] = useState(() => {\r\n    try {\r\n      // Get from local storage by key\r\n      const item = window.localStorage.getItem(key);\r\n      // Parse stored json or if none return initialValue\r\n      return item ? JSON.parse(item) : initialValue;\r\n    } catch (error) {\r\n      // If error also return initialValue\r\n      console.log(error);\r\n      return initialValue;\r\n    }\r\n  });\r\n\r\n  // Return a wrapped version of useState's setter function that ...\r\n  // ... persists the new value to localStorage.\r\n  const setValue = value => {\r\n    try {\r\n      // Allow value to be a function so we have same API as useState\r\n      const valueToStore =\r\n        value instanceof Function ? value(storedValue) : value;\r\n      // Save state\r\n      setStoredValue(valueToStore);\r\n      // Save to local storage\r\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\r\n    } catch (error) {\r\n      // A more advanced implementation would handle the error case\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return [storedValue, setValue];\r\n}","import React, { useEffect, useCallback, useRef } from 'react';\r\n\r\nimport ModalLost from './ModalLost';\r\nimport Cell from './Cell';\r\nimport NewGameButton from './NewGameButton';\r\nimport UndoButton from './UndoButton';\r\nimport Score from './Score';\r\n\r\nimport { arrayClone, arraysEqual } from '../helpers/utility';\r\nimport { spawnTwoRandomCells, spawnRandomCell, emptyCell } from '../helpers/cell';\r\nimport { moveUp, moveDown, moveLeft, moveRight } from '../helpers/moves';\r\nimport { checkUp, checkDown, checkLeft, checkRight } from '../helpers/checks';\r\nimport { useLocalStorage } from '../helpers/useLocalStorage';\r\n\r\nconst Grid = () => {\r\n  const inititalState = Array(4)\r\n    .fill()\r\n    .map(() => Array(4).fill(new emptyCell(0)));\r\n\r\n  const gridRef = useRef();\r\n  const [grid, setGrid] = useLocalStorage('grid', inititalState);\r\n  const [score, setScore] = useLocalStorage('score', 0);\r\n  const [bestScore, setBestScore] = useLocalStorage('bestScore', 0);\r\n  const [isBestScoreInCurrentGame, setIsBestScoreInCurrentGame] = useLocalStorage(\r\n    'isBestScoreInCurrentGame',\r\n    false,\r\n  );\r\n  const [lastTurnGrid, setLastTurnGrid] = useLocalStorage('lastTurnGrid', inititalState);\r\n  const [lastTurnScore, setLastTurnScore] = useLocalStorage('lastTurnScore', 0);\r\n  const [modalIsOpen, setModalIsOpen] = useLocalStorage('modalIsOpen', false);\r\n\r\n  // Key codes\r\n  const UP = 38;\r\n  const DOWN = 40;\r\n  const LEFT = 37;\r\n  const RIGHT = 39;\r\n\r\n  const newGame = useCallback(() => {\r\n    // Reset\r\n    setIsBestScoreInCurrentGame(false);\r\n    setModalIsOpen(false);\r\n    setLastTurnGrid(inititalState);\r\n    setScore(0);\r\n\r\n    // New grid with random two cells\r\n    let gridClone = arrayClone(inititalState);\r\n    spawnTwoRandomCells(gridClone);\r\n    setGrid(gridClone);\r\n  }, [inititalState, setGrid, setIsBestScoreInCurrentGame, setLastTurnGrid, setModalIsOpen, setScore]);\r\n\r\n  useEffect(() => {\r\n    const checkIsGridEmpty = grid => {\r\n      for (let row = 0; row < 4; row++) {\r\n        for (let column = 0; column < 4; column++) {\r\n          if (grid[row][column].value) return false;\r\n        }\r\n      }\r\n      return true;\r\n    };\r\n\r\n    checkIsGridEmpty(grid) && newGame();\r\n  }, [grid, newGame]);\r\n\r\n  const updateBestScore = useCallback(\r\n    score => {\r\n      if (score <= bestScore) return;\r\n      setBestScore(score);\r\n      setIsBestScoreInCurrentGame(true);\r\n    },\r\n    [bestScore, setBestScore, setIsBestScoreInCurrentGame],\r\n  );\r\n\r\n  useEffect(() => {\r\n    const checkIsGridFull = grid => {\r\n      for (let row = 0; row < 4; row++) {\r\n        for (let column = 0; column < 4; column++) {\r\n          if (!grid[row][column].value) return false;\r\n          grid[row][column].className = '';\r\n        }\r\n      }\r\n      return true;\r\n    };\r\n\r\n    const checkIsGameLost = () => {\r\n      const noMovesAvailable =\r\n        checkUp(grid) && checkDown(grid) && checkLeft(grid) && checkRight(grid);\r\n\r\n      noMovesAvailable && setModalIsOpen(true);\r\n    };\r\n\r\n    if (checkIsGridFull(grid)) checkIsGameLost();\r\n  }, [grid, setModalIsOpen]);\r\n\r\n  useEffect(() => {\r\n    updateBestScore(score);\r\n\r\n    const gridNode = gridRef.current;\r\n    let gridClone = arrayClone(grid);\r\n    let roundScore = 0;\r\n\r\n    let xDown = null;\r\n    let yDown = null;\r\n\r\n    const getTouches = e => e.touches;\r\n\r\n    const handleTouchStart = e => {\r\n      const firstTouch = getTouches(e)[0];\r\n      xDown = firstTouch.clientX;\r\n      yDown = firstTouch.clientY;\r\n    };\r\n\r\n    const handleTouchMove = e => {\r\n      e.preventDefault();\r\n      if (!xDown || !yDown) return;\r\n\r\n      let xUp = e.touches[0].clientX;\r\n      let yUp = e.touches[0].clientY;\r\n\r\n      let xDiff = xDown - xUp;\r\n      let yDiff = yDown - yUp;\r\n\r\n      if (Math.abs(xDiff) > Math.abs(yDiff)) {\r\n        if (xDiff > 0) [gridClone, roundScore] = moveLeft(gridClone, roundScore);\r\n        else [gridClone, roundScore] = moveRight(gridClone, roundScore);\r\n      } else {\r\n        if (yDiff > 0) [gridClone, roundScore] = moveUp(gridClone, roundScore);\r\n        else [gridClone, roundScore] = moveDown(gridClone, roundScore);\r\n      }\r\n\r\n      xDown = null;\r\n      yDown = null;\r\n\r\n      !arraysEqual(grid, gridClone) && spawnRandomCell(gridClone);\r\n      setLastTurnGrid(grid);\r\n\r\n      setGrid(gridClone);\r\n    };\r\n\r\n    const round = direction => {\r\n      switch (direction) {\r\n        case UP:\r\n          [gridClone, roundScore] = moveUp(gridClone, roundScore);\r\n          break;\r\n        case DOWN:\r\n          [gridClone, roundScore] = moveDown(gridClone, roundScore);\r\n          break;\r\n        case LEFT:\r\n          [gridClone, roundScore] = moveLeft(gridClone, roundScore);\r\n          break;\r\n        case RIGHT:\r\n          [gridClone, roundScore] = moveRight(gridClone, roundScore);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n\r\n      setLastTurnScore(score);\r\n      setScore(score => score + roundScore);\r\n\r\n      setLastTurnGrid(grid);\r\n      !arraysEqual(grid, gridClone) && spawnRandomCell(gridClone);\r\n      setGrid(gridClone);\r\n    };\r\n\r\n    const handleKeyDown = e => {\r\n      // disable scrolling on arrows\r\n      if (e.keyCode === UP || e.keyCode === DOWN) e.preventDefault();\r\n      round(e.keyCode);\r\n    };\r\n\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    gridNode.addEventListener('touchstart', handleTouchStart);\r\n    gridNode.addEventListener('touchmove', handleTouchMove);\r\n    return () => {\r\n      document.removeEventListener('keydown', handleKeyDown);\r\n      gridNode.removeEventListener('touchstart', handleTouchStart);\r\n      gridNode.removeEventListener('touchmove', handleTouchMove);\r\n    };\r\n  }, [\r\n    bestScore,\r\n    grid,\r\n    score,\r\n    setGrid,\r\n    setLastTurnGrid,\r\n    setLastTurnScore,\r\n    setScore,\r\n    updateBestScore,\r\n  ]);\r\n\r\n  const handleUndoClick = () => {\r\n    if (arraysEqual(lastTurnGrid, inititalState)) return;\r\n\r\n    if (score === bestScore && isBestScoreInCurrentGame) setBestScore(lastTurnScore);\r\n    setGrid(lastTurnGrid);\r\n    setScore(lastTurnScore);\r\n  };\r\n\r\n  return (\r\n    <section className=\"game\">\r\n      <header className=\"game-header\">\r\n        <div className=\"game-info\">\r\n          <h1 className=\"game-info__title\">2048 Clone</h1>\r\n          <Score score={score} bestScore={bestScore} />\r\n        </div>\r\n        <div className=\"buttons\">\r\n          <UndoButton handleUndoClick={handleUndoClick} />\r\n          <NewGameButton newGame={newGame} parent=\"game-header\" />\r\n        </div>\r\n      </header>\r\n      <main ref={gridRef} className=\"grid\">\r\n        {grid.map(row =>\r\n          row.map((cell, column) => (\r\n            <Cell key={column} cell={cell} row={row} column={column} />\r\n          )),\r\n        )}\r\n      </main>\r\n      <ModalLost isOpen={modalIsOpen} newGame={newGame} />\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Grid;\r\n","import React from 'react'\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__para\">\r\n        <span className=\"bold\">HOW TO PLAY:</span> Use your{' '}\r\n        <span className=\"bold\">arrow keys</span> to move the tiles. When two tiles with\r\n        the same number touch, they <span className=\"bold\">merge into one!</span>\r\n      </p>\r\n\r\n      <hr className=\"footer__hr\" />\r\n\r\n      <p className=\"footer__para\">\r\n        This game was created by{' '}\r\n        <a\r\n          href=\"http://gabrielecirulli.com/\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"link bold\"\r\n        >\r\n          Gabriele Cirulli\r\n        </a>{' '}\r\n        â€” original game{' '}\r\n        <a\r\n          href=\"http://git.io/2048\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"link bold\"\r\n        >\r\n          website.\r\n        </a>{' '}\r\n        I've just cloned the game for fun and testing my code skills.\r\n      </p>\r\n\r\n      <hr className=\"footer__hr\" />\r\n\r\n      <div className=\"footer__links\">\r\n        <a\r\n          href=\"https://github.com/zronev/2048-clone\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"button\"\r\n        >\r\n          Repo\r\n        </a>\r\n        <a\r\n          href=\"https://github.com/zronev\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"button\"\r\n        >\r\n          Github profile\r\n        </a>\r\n      </div>\r\n    </footer>\r\n  )\r\n}\r\n\r\nexport default Footer\r\n","import React from 'react'\nimport Grid from './components/Grid'\nimport Footer from './components/Footer'\n\nfunction App() {\n  return (\n    <div className=\"main\">\n      <Grid />\n      <Footer />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nimport 'normalize.css'\nimport './scss/style.scss'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}