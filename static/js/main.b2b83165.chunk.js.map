{"version":3,"sources":["components/Header.js","components/NewGameButton.js","components/ModalLost.js","components/Cell.js","components/UndoButton.js","components/Score.js","helpers/utility.js","helpers/cell.js","helpers/moves.js","components/Grid.js","helpers/checks.js","components/Footer.js","App.js","index.js"],"names":["Header","className","NewGameButton","newGame","parent","onClick","ModalLost","isOpen","Cell","cell","value","UndoButton","handleUndoClick","Score","score","bestScore","arrayClone","arr","JSON","parse","stringify","arraysEqual","arr1","arr2","emptyCell","this","randomCell","row","Math","floor","random","column","spawnRandomCell","grid","count","moveUp","newGrid","rotate","newScore","flip","move","translate","moveDown","moveLeft","moveRight","slide","merge","modifiedArr","filter","map","zeros","Array","length","fill","i","reverse","rotatedGrid","col","translatedGrid","Grid","inititalState","gridRef","useRef","useState","setGrid","setScore","setBestScore","lastTurnGrid","setLastTurnGrid","lastTurnScore","setLastTurnScore","modalIsOpen","setModalIsOpen","useCallback","gridClone","spawnTwoRandomCells","useEffect","checkIsGridFull","currentCell","isOutBoundaries","distance","cellAbove","doesntColliding","foundDistance","isEqual","checkUp","cellBelow","checkDown","cellOnLeft","checkLeft","checkRight","gridNode","current","roundScore","xDown","yDown","handleTouchStart","e","firstTouch","touches","getTouches","clientX","clientY","handleTouchMove","preventDefault","xUp","yUp","xDiff","yDiff","abs","handleKeyDown","keyCode","direction","round","document","addEventListener","removeEventListener","ref","index","key","Footer","href","target","rel","App","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.b2b83165.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Header = () => {\r\n  return (\r\n    <header className=\"header\">\r\n      <h1 className=\"header__title\">2048</h1>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header\r\n","import React from 'react'\r\n\r\nconst NewGameButton = ({ newGame, parent }) => {\r\n  return (\r\n    <button onClick={newGame} className={`button button--new-game ${parent}__restart`}>\r\n      New Game\r\n    </button>\r\n  )\r\n}\r\n\r\nexport default NewGameButton\r\n","import React from 'react'\r\nimport NewGameButton from './NewGameButton'\r\n\r\nconst ModalLost = ({ isOpen, newGame }) => {\r\n  return (\r\n    <div className={`modal ${isOpen ? 'modal--open' : ''}`}>\r\n      <h3 className=\"modal__title\">You lost...</h3>\r\n      <NewGameButton newGame={newGame} parent=\"modal\" />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ModalLost\r\n","import React from 'react'\r\n\r\nconst Cell = ({ cell }) => {\r\n  const {value, className} = cell\r\n\r\n  return (\r\n    <div\r\n      className={`grid__cell grid__cell--${className}\r\n      ${value > 2 && value <= 2048 ? `grid__cell--${value}` : ''}\r\n      ${value > 2048 ? `grid__cell--over-2048` : ''}`}\r\n    >\r\n      {value ? value : ''}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Cell\r\n","import React from 'react'\r\n\r\nconst UndoButton = ({ handleUndoClick }) => {\r\n  return (\r\n    <button onClick={handleUndoClick} className=\"button game-info__undo\">\r\n      Undo\r\n    </button>\r\n  )\r\n}\r\n\r\nexport default UndoButton\r\n","import React from 'react'\r\n\r\nconst Score = ({ score, bestScore }) => {\r\n  return (\r\n    <div className=\"score-bar\">\r\n      <span className=\"score\">\r\n        <span className=\"score__title\">Score</span>\r\n        <span className=\"score__number\">{score}</span>\r\n      </span>\r\n      <span className=\"score score--best\">\r\n        <span className=\"score__title\">Best</span>\r\n        <span className=\"score__number\">{bestScore}</span>\r\n      </span>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Score\r\n","export const arrayClone = arr => JSON.parse(JSON.stringify(arr)) // to deep clone matrix\r\n\r\nexport const arraysEqual = (arr1, arr2) => JSON.stringify(arr1) === JSON.stringify(arr2)\r\n","export class emptyCell {\r\n  constructor() {\r\n    this.value = 0;\r\n    this.className = 'empty';\r\n  }\r\n}\r\n\r\nclass randomCell {\r\n  constructor() {\r\n    this.row = Math.floor(Math.random() * Math.floor(4));\r\n    this.column = Math.floor(Math.random() * Math.floor(4));\r\n    this.value = Math.random() > 0.9 ? 4 : 2;\r\n    this.className = 'emerged';\r\n  }\r\n}\r\n\r\nexport const spawnTwoRandomCells = grid => {\r\n  let count = 0;\r\n  while (count < 2) {\r\n    const cell = new randomCell();\r\n\r\n    if (!grid[cell.row][cell.column].value) {\r\n      grid[cell.row][cell.column] = cell;\r\n      count++;\r\n    }\r\n  }\r\n};\r\n\r\nexport const spawnRandomCell = grid => {\r\n  let count = 0;\r\n  while (count < 1) {\r\n    const cell = new randomCell();\r\n\r\n    if (!grid[cell.row][cell.column].value) {\r\n      grid[cell.row][cell.column] = cell;\r\n      count++;\r\n    }\r\n  }\r\n};\r\n","import { arrayClone } from './utility';\r\nimport { emptyCell } from './cell';\r\n\r\nexport const moveUp = (grid, score) => {\r\n  // Rotate and flip direction from up to right\r\n  let newGrid = rotate(arrayClone(grid));\r\n  let newScore = score;\r\n  newGrid = flip(newGrid);\r\n\r\n  [newGrid, newScore] = move(newGrid, newScore);\r\n\r\n  // Rotate and flip back\r\n  newGrid = flip(newGrid);\r\n  newGrid = translate(newGrid);\r\n  return [newGrid, newScore];\r\n};\r\n\r\nexport const moveDown = (grid, score) => {\r\n  // Rotate direction from down to right\r\n  let newGrid = arrayClone(grid);\r\n  let newScore = score;\r\n  newGrid = rotate(newGrid);\r\n\r\n  [newGrid, newScore] = move(newGrid, newScore);\r\n\r\n  // Rotate back\r\n  newGrid = translate(newGrid);\r\n  return [newGrid, newScore];\r\n};\r\n\r\nexport const moveLeft = (grid, score) => {\r\n  // Flip direction from left to right\r\n  let newGrid = flip(arrayClone(grid));\r\n  let newScore = score;\r\n\r\n  [newGrid, newScore] = move(newGrid, newScore);\r\n\r\n  // Flip back\r\n  newGrid = flip(newGrid);\r\n  return [newGrid, newScore];\r\n};\r\n\r\nexport const moveRight = (grid, score) => {\r\n  let newGrid = arrayClone(grid);\r\n  let newScore = score;\r\n\r\n  [newGrid, newScore] = move(newGrid, newScore);\r\n\r\n  return [newGrid, newScore];\r\n};\r\n\r\nconst move = (grid, score) => {\r\n  let newGrid = arrayClone(grid);\r\n  let newScore = score;\r\n\r\n  for (let row = 0; row < 4; row++) {\r\n    newGrid[row] = slide(newGrid[row]);\r\n    [newGrid[row], newScore] = merge(newGrid[row], newScore);\r\n    newGrid[row] = slide(newGrid[row]);\r\n  }\r\n\r\n  return [newGrid, newScore];\r\n};\r\n\r\nconst slide = arr => {\r\n  let modifiedArr = arrayClone(arr);\r\n\r\n  modifiedArr = modifiedArr.filter(cell => cell.value);\r\n  modifiedArr = modifiedArr.map(cell =>\r\n    cell.className !== 'merged' ? { ...cell, className: 'moved' } : cell,\r\n  );\r\n\r\n  const zeros = new Array(4 - modifiedArr.length).fill(new emptyCell(0));\r\n  modifiedArr = [...zeros, ...modifiedArr];\r\n\r\n  return modifiedArr;\r\n};\r\n\r\nconst merge = (arr, score) => {\r\n  let modifiedArr = arrayClone(arr);\r\n  let newScore = score;\r\n\r\n  for (let i = 3; i > 0; i--) {\r\n    if (modifiedArr[i - 1].value === modifiedArr[i].value) {\r\n      modifiedArr[i].value = modifiedArr[i - 1].value * 2;\r\n      modifiedArr[i].className = 'merged'\r\n      modifiedArr[i - 1].value = 0;\r\n      newScore += modifiedArr[i].value;\r\n    }\r\n  }\r\n\r\n  return [modifiedArr, newScore];\r\n};\r\n\r\nconst flip = grid => {\r\n  let modifiedArr = arrayClone(grid);\r\n  return modifiedArr.map(row => row.reverse());\r\n};\r\n\r\nconst rotate = grid => {\r\n  let rotatedGrid = arrayClone(grid);\r\n  for (let row = 0; row < 4; row++) {\r\n    for (let col = 0; col < 4; col++) {\r\n      rotatedGrid[row][col] = grid[col][row];\r\n    }\r\n  }\r\n\r\n  return rotatedGrid;\r\n};\r\n\r\nconst translate = grid => {\r\n  let translatedGrid = arrayClone(grid);\r\n\r\n  translatedGrid = rotate(translatedGrid);\r\n  translatedGrid = rotate(translatedGrid);\r\n  translatedGrid = rotate(translatedGrid);\r\n\r\n  return translatedGrid;\r\n};\r\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\r\n\r\nimport ModalLost from './ModalLost';\r\nimport Cell from './Cell';\r\nimport NewGameButton from './NewGameButton';\r\nimport UndoButton from './UndoButton';\r\nimport Score from './Score';\r\n\r\nimport { arrayClone, arraysEqual } from '../helpers/utility';\r\nimport { spawnTwoRandomCells, spawnRandomCell, emptyCell } from '../helpers/cell';\r\nimport { moveUp, moveDown, moveLeft, moveRight } from '../helpers/moves';\r\nimport { checkUp, checkDown, checkLeft, checkRight } from '../helpers/checks';\r\n\r\nconst Grid = () => {\r\n  const inititalState = Array(4)\r\n    .fill()\r\n    .map(() => Array(4).fill(new emptyCell(2)));\r\n\r\n  // const inititalState = [\r\n  //   [0, 16, 8, 0],\r\n  //   [16, 8, 0, 8],\r\n  //   [8, 0, 8, 16],\r\n  //   [0, 8, 16, 0],\r\n  // ]\r\n\r\n  // const inititalState = [\r\n  //   [0, 16, 8, 0],\r\n  //   [0, 8, 0, 0],\r\n  //   [8, 0, 8, 16],\r\n  //   [0, 8, 16, 0],\r\n  // ];\r\n\r\n  // const inititalState = [\r\n  //   [2, 8, 8, 4],\r\n  //   [0, 0, 0, 0],\r\n  //   [0, 0, 0, 0],\r\n  //   [0, 0, 0, 0],\r\n  // ]\r\n\r\n  const gridRef = useRef();\r\n  const [grid, setGrid] = useState(inititalState);\r\n  const [score, setScore] = useState(0);\r\n  const [bestScore, setBestScore] = useState(0);\r\n  const [lastTurnGrid, setLastTurnGrid] = useState(inititalState);\r\n  const [lastTurnScore, setLastTurnScore] = useState(0);\r\n  const [modalIsOpen, setModalIsOpen] = useState(false);\r\n\r\n  // Key codes\r\n  const UP = 38;\r\n  const DOWN = 40;\r\n  const LEFT = 37;\r\n  const RIGHT = 39;\r\n\r\n  const newGame = useCallback(() => {\r\n    // Reset\r\n    setModalIsOpen(false);\r\n    setLastTurnGrid(inititalState);\r\n    setScore(0);\r\n\r\n    // New grid with random two cells\r\n    let gridClone = arrayClone(inititalState);\r\n    spawnTwoRandomCells(gridClone);\r\n    setGrid(gridClone);\r\n  }, [inititalState]);\r\n\r\n  useEffect(() => {\r\n    newGame();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const checkIsGridFull = grid => {\r\n      for (let row = 0; row < 4; row++) {\r\n        for (let column = 0; column < 4; column++) {\r\n          if (!grid[row][column].value) return false;\r\n          grid[row][column].className = '';\r\n        }\r\n      }\r\n      return true;\r\n    };\r\n\r\n    const checkIsGameLost = () => {\r\n      const noMovesAvailable =\r\n        !checkUp(grid) && !checkDown(grid) && !checkLeft(grid) && !checkRight(grid);\r\n\r\n      noMovesAvailable && setModalIsOpen(true);\r\n    };\r\n\r\n    if (checkIsGridFull(grid)) checkIsGameLost();\r\n  }, [grid]);\r\n\r\n  useEffect(() => {\r\n    score > bestScore && setBestScore(score);\r\n\r\n    const gridNode = gridRef.current;\r\n    let gridClone = arrayClone(grid);\r\n    let roundScore = 0;\r\n\r\n    let xDown = null;\r\n    let yDown = null;\r\n\r\n    const getTouches = e => e.touches;\r\n\r\n    const handleTouchStart = e => {\r\n      const firstTouch = getTouches(e)[0];\r\n      xDown = firstTouch.clientX;\r\n      yDown = firstTouch.clientY;\r\n    };\r\n\r\n    const handleTouchMove = e => {\r\n      e.preventDefault();\r\n      if (!xDown || !yDown) return;\r\n\r\n      let xUp = e.touches[0].clientX;\r\n      let yUp = e.touches[0].clientY;\r\n\r\n      let xDiff = xDown - xUp;\r\n      let yDiff = yDown - yUp;\r\n\r\n      if (Math.abs(xDiff) > Math.abs(yDiff)) {\r\n        if (xDiff > 0) [gridClone, roundScore] = moveLeft(gridClone, roundScore);\r\n        else [gridClone, roundScore] = moveRight(gridClone, roundScore);\r\n      } else {\r\n        if (yDiff > 0) [gridClone, roundScore] = moveUp(gridClone, roundScore);\r\n        else [gridClone, roundScore] = moveDown(gridClone, roundScore);\r\n      }\r\n\r\n      xDown = null;\r\n      yDown = null;\r\n\r\n      !arraysEqual(grid, gridClone) && spawnRandomCell(gridClone);\r\n      setLastTurnGrid(grid);\r\n\r\n      setGrid(gridClone);\r\n    };\r\n\r\n    const round = direction => {\r\n      switch (direction) {\r\n        case UP:\r\n          [gridClone, roundScore] = moveUp(gridClone, roundScore);\r\n          break;\r\n        case DOWN:\r\n          [gridClone, roundScore] = moveDown(gridClone, roundScore);\r\n          break;\r\n        case LEFT:\r\n          [gridClone, roundScore] = moveLeft(gridClone, roundScore);\r\n          break;\r\n        case RIGHT:\r\n          [gridClone, roundScore] = moveRight(gridClone, roundScore);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n\r\n      setLastTurnScore(score);\r\n      setScore(score => score + roundScore);\r\n\r\n      setLastTurnGrid(grid);\r\n      !arraysEqual(grid, gridClone) && spawnRandomCell(gridClone);\r\n      setGrid(gridClone);\r\n    };\r\n\r\n    const handleKeyDown = e => {\r\n      // disable scrolling on arrows\r\n      if (e.keyCode === UP || e.keyCode === DOWN) e.preventDefault();\r\n      round(e.keyCode);\r\n    };\r\n\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    gridNode.addEventListener('touchstart', handleTouchStart);\r\n    gridNode.addEventListener('touchmove', handleTouchMove);\r\n    return () => {\r\n      document.removeEventListener('keydown', handleKeyDown);\r\n      gridNode.removeEventListener('touchstart', handleTouchStart);\r\n      gridNode.removeEventListener('touchmove', handleTouchMove);\r\n    };\r\n  }, [bestScore, grid, score]);\r\n\r\n  const handleUndoClick = () => {\r\n    if (arraysEqual(lastTurnGrid, inititalState)) return;\r\n    setGrid(lastTurnGrid);\r\n    setScore(lastTurnScore);\r\n  };\r\n\r\n  return (\r\n    <section className=\"game\">\r\n      <header className=\"game-info\">\r\n        <Score score={score} bestScore={bestScore} />\r\n        <div className=\"buttons\">\r\n          <UndoButton handleUndoClick={handleUndoClick} />\r\n          <NewGameButton newGame={newGame} parent=\"game-info\" />\r\n        </div>\r\n      </header>\r\n      <main ref={gridRef} className=\"grid\">\r\n        {grid.map((row, index) =>\r\n          row.map((cell, column) => (\r\n            <Cell key={column} cell={cell} row={row} column={column} />\r\n          )),\r\n        )}\r\n      </main>\r\n      <ModalLost isOpen={modalIsOpen} newGame={newGame} />\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Grid;\r\n","export const checkUp = grid => {\r\n  for (let row = 0; row < 4; row++) {\r\n    for (let column = 0; column < 4; column++) {\r\n      const currentCell = grid[row][column]\r\n\r\n      let isOutBoundaries = (distance, row) => row - (distance + 1) < 0\r\n\r\n      let cellAbove = (row, column, distance) => grid[row - (distance + 1)][column]\r\n\r\n      let isEqual = (row, column, distance) =>\r\n        !isOutBoundaries(distance, row) &&\r\n        cellAbove(row, column, distance) === currentCell\r\n\r\n      let doesntColliding = (row, column, distance) =>\r\n        !isOutBoundaries(distance, row) && !cellAbove(row, column, distance)\r\n\r\n      let distance = 0\r\n      let foundDistance = false\r\n\r\n      while (!foundDistance) {\r\n        if (!doesntColliding(row, column, distance)) foundDistance = true\r\n        else distance++\r\n      }\r\n\r\n      if (distance || isEqual(row, column, distance)) return true\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\nexport const checkDown = grid => {\r\n  for (let row = 3; row > -1; row--) {\r\n    for (let column = 0; column < 4; column++) {\r\n      const currentCell = grid[row][column]\r\n      if (!currentCell) continue\r\n\r\n      let isOutBoundaries = (row, distance) => row + (distance + 1) > 3\r\n\r\n      let cellBelow = (row, column, distance) => grid[row + (distance + 1)][column]\r\n\r\n      let isEqual = (row, column, distance) =>\r\n        !isOutBoundaries(row, distance) &&\r\n        cellBelow(row, column, distance) === currentCell\r\n\r\n      let doesntColliding = (row, column, distance) =>\r\n        !isOutBoundaries(row, distance) && !cellBelow(row, column, distance)\r\n\r\n      let distance = 0\r\n      let foundDistance = false\r\n\r\n      while (!foundDistance) {\r\n        if (!doesntColliding(row, column, distance)) foundDistance = true\r\n        else distance++\r\n      }\r\n\r\n      if (distance || isEqual(row, column, distance)) return true\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\nexport const checkLeft = grid => {\r\n  for (let column = 0; column < 4; column++) {\r\n    for (let row = 0; row < 4; row++) {\r\n      const currentCell = grid[row][column]\r\n      if (!currentCell) continue\r\n\r\n      let isOutBoundaries = (column, distance) => column - (distance + 1) < 0\r\n\r\n      let cellOnLeft = (row, column, distance) => grid[row][column - (distance + 1)]\r\n\r\n      let isEqual = (row, column, distance) =>\r\n        !isOutBoundaries(column, distance) &&\r\n        cellOnLeft(row, column, distance) === currentCell\r\n\r\n      let doesntColliding = (row, column, distance) =>\r\n        !isOutBoundaries(column, distance) && !cellOnLeft(row, column, distance)\r\n\r\n      let distance = 0\r\n      let foundDistance = false\r\n\r\n      while (!foundDistance) {\r\n        if (!doesntColliding(row, column, distance)) foundDistance = true\r\n        else distance++\r\n      }\r\n\r\n      if (distance || isEqual(row, column, distance)) return true\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\nexport const checkRight = grid => {\r\n  for (let column = 3; column > -1; column--) {\r\n    for (let row = 0; row < 4; row++) {\r\n      const currentCell = grid[row][column]\r\n      if (!currentCell) continue\r\n\r\n      let isOutBoundaries = (column, distance) => column + (distance + 1) > 3\r\n\r\n      let cellOnLeft = (row, column, distance) => grid[row][column + (distance + 1)]\r\n\r\n      let isEqual = (row, column, distance) =>\r\n        !isOutBoundaries(column, distance) &&\r\n        cellOnLeft(row, column, distance) === currentCell\r\n\r\n      let doesntColliding = (row, column, distance) =>\r\n        !isOutBoundaries(column, distance) && !cellOnLeft(row, column, distance)\r\n\r\n      let distance = 0\r\n      let foundDistance = false\r\n\r\n      while (!foundDistance) {\r\n        if (!doesntColliding(row, column, distance)) foundDistance = true\r\n        else distance++\r\n      }\r\n\r\n      if (distance || isEqual(row, column, distance)) return true\r\n    }\r\n  }\r\n  return false\r\n}\r\n","import React from 'react'\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__para\">\r\n        <span className=\"bold\">HOW TO PLAY:</span> Use your{' '}\r\n        <span className=\"bold\">arrow keys</span> to move the tiles. When two tiles with\r\n        the same number touch, they <span className=\"bold\">merge into one!</span>\r\n      </p>\r\n\r\n      <hr className=\"footer__hr\" />\r\n\r\n      <p className=\"footer__para\">\r\n        This game was created by{' '}\r\n        <a\r\n          href=\"http://gabrielecirulli.com/\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"link bold\"\r\n        >\r\n          Gabriele Cirulli\r\n        </a>{' '}\r\n        â€” original game{' '}\r\n        <a\r\n          href=\"http://git.io/2048\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"link bold\"\r\n        >\r\n          website.\r\n        </a>{' '}\r\n        I've just cloned the game for fun and testing my code skills.\r\n      </p>\r\n\r\n      <hr className=\"footer__hr\" />\r\n\r\n      <div className=\"footer__links\">\r\n        <a\r\n          href=\"https://github.com/zronev/2048-clone\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"button\"\r\n        >\r\n          Repo\r\n        </a>\r\n        <a\r\n          href=\"https://github.com/zronev\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"button\"\r\n        >\r\n          Github profile\r\n        </a>\r\n      </div>\r\n    </footer>\r\n  )\r\n}\r\n\r\nexport default Footer\r\n","import React from 'react'\nimport Header from './components/Header'\nimport Grid from './components/Grid'\nimport Footer from './components/Footer'\n\nfunction App() {\n  return (\n    <div className=\"main\">\n      <Header />\n      <Grid />\n      <Footer />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nimport 'normalize.css'\nimport './scss/style.scss'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}