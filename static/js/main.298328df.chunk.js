(this.webpackJsonp2048=this.webpackJsonp2048||[]).push([[0],{12:function(e,t,a){e.exports=a(21)},20:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),o=a.n(c),l=a(1),u=a(10),s=a.n(u),m=function(e){var t=e.newGame,a=e.parent;return r.a.createElement("button",{onClick:t,className:"button button--new-game ".concat(a,"__restart")},"New Game")},i=function(e){var t=e.isOpen,a=e.newGame;return r.a.createElement("div",{className:"modal ".concat(t?"modal--open":"")},r.a.createElement("h3",{className:"modal__title"},"You lost..."),r.a.createElement(m,{newGame:a,parent:"modal"}))},f=a(2),v=a(11),b=a.n(v),h=function(e){var t,a=e.cell,n=e.row,c=e.column,o=a.value,l=a.className;"move-to-merge"!==a.className&&(a.row=n,a.column=c);var u=b()((t={cell:!0},Object(f.a)(t,"grid__cell--".concat(a.row,"-").concat(a.column),"empty"!==a.className),Object(f.a)(t,"cell--".concat(l),l),Object(f.a)(t,"cell--".concat(o),o>2&&o<=2048),Object(f.a)(t,"cell--over-2048",o>2048),t));return r.a.createElement("div",{className:u},o||"")},d=function(e){var t=e.handleUndoClick;return r.a.createElement("button",{onClick:t,className:"button game-info__undo"},"Undo")},p=function(e){var t=e.score,a=e.bestScore;return r.a.createElement("div",{className:"score-bar"},r.a.createElement("span",{className:"score"},r.a.createElement("span",{className:"score__title"},"Score"),r.a.createElement("span",{className:"score__number"},t)),r.a.createElement("span",{className:"score score--best"},r.a.createElement("span",{className:"score__title"},"Best"),r.a.createElement("span",{className:"score__number"},a)))},N=function(e){return JSON.parse(JSON.stringify(e))},O=function(e,t){var a=e.map((function(e){return e.map((function(e){return e.value}))})),n=t.map((function(e){return e.map((function(e){return e.value}))}));return JSON.stringify(a)===JSON.stringify(n)},E=a(5),w=function e(t,a,n,r){Object(E.a)(this,e),this.row=t,this.column=a,this.prevRow=n,this.prevColumn=r,this.value=0,this.className="empty"},g=function e(t,a){Object(E.a)(this,e),this.row=Math.floor(Math.random()*Math.floor(4)),this.column=Math.floor(Math.random()*Math.floor(4)),this.prevRow=t,this.prevColumn=a,this.value=Math.random()>.9?4:2,this.className="emerged"},j=function(e){for(var t=0;t<1;){var a=new g;e[a.row][a.column].value||(e[a.row][a.column]=a,t++)}},_=a(4),k=a(3),y=function(e,t){var a=I(N(e)),n=t;a=R(a);var r=M(a,n),c=Object(l.a)(r,2);return a=c[0],n=c[1],a=R(a),[a=A(a),n]},C=function(e,t){var a=N(e),n=t;a=I(a);var r=M(a,n),c=Object(l.a)(r,2);return a=c[0],n=c[1],[a=A(a),n]},S=function(e,t){var a=R(N(e)),n=t,r=M(a,n),c=Object(l.a)(r,2);return a=c[0],n=c[1],[a=R(a),n]},G=function(e,t){var a=N(e),n=t,r=M(a,n),c=Object(l.a)(r,2);return[a=c[0],n=c[1]]},M=function(e,t){var a=N(e),n=t;a=T(a);for(var r=0;r<4;r++){a[r]=J(a[r]);var c=L(a[r],n),o=Object(l.a)(c,2);a[r]=o[0],n=o[1],a[r]=J(a[r])}return[a,n]},J=function(e){var t=N(e);t=(t=t.filter((function(e){return e.value}))).map((function(e){return"move-to-merge"===e.className?e:"merged"===e.className?Object(k.a)({},e,{prevRow:e.row,prevColumn:e.column}):Object(k.a)({},e,{prevRow:e.row,prevColumn:e.column,className:"moved"})}));var a=new Array(4-t.length).fill(new w(0));return t=[].concat(Object(_.a)(a),Object(_.a)(t))},L=function(e,t){for(var a=N(e),n=t,r=3;r>0;r--)if(a[r-1].value===a[r].value){if(!a[r].value)continue;a[r-1].row=a[r].row,a[r-1].column=a[r].column,a[r-1].className="move-to-merge",a[r].value=2*a[r-1].value,a[r].prevRow=a[r-1].row,a[r].prevColumn=a[r-1].column,a[r].className="merged",a[r-1].value=0,n+=a[r].value}return[a,n]},R=function(e){return N(e).map((function(e){return e.reverse()}))},I=function(e){for(var t=N(e),a=0;a<4;a++)for(var n=0;n<4;n++)t[a][n]=e[n][a];return t},A=function(e){var t=N(e);return t=I(t),t=I(t),t=I(t)},T=function(e){var t=N(e);return t=t.map((function(e){return e.map((function(e){return"empty"!==e.className?Object(k.a)({},e,{className:""}):e}))}))},U=function(e){for(var t=N(e),a=0;a<4;a++)t[a]=Y(t[a]),t[a]=B(t[a]),t[a]=Y(t[a]);return t},Y=function(e){var t=N(e);t=(t=t.filter((function(e){return e.value}))).map((function(e){return"merged"!==e.className?Object(k.a)({},e,{className:"moved"}):e}));var a=new Array(4-t.length).fill(new w(0));return t=[].concat(Object(_.a)(a),Object(_.a)(t))},B=function(e){for(var t=N(e),a=3;a>0;a--)t[a-1].value===t[a].value&&(t[a].value=2*t[a-1].value,t[a].className="merged",t[a-1].value=0);return t},z=function(e){return N(e).map((function(e){return e.reverse()}))},D=function(e){for(var t=N(e),a=0;a<4;a++)for(var n=0;n<4;n++)t[a][n]=e[n][a];return t},W=function(e){var t=N(e);return t=D(t),t=D(t),t=D(t)},X=function(e,t){var a=Object(n.useState)((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return console.log(n),t}})),r=Object(l.a)(a,2),c=r[0],o=r[1];return[c,function(t){try{var a=t instanceof Function?t(c):t;o(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){console.log(n)}}]},x=function(){var e=Array(4).fill().map((function(){return Array(4).fill(new w(0))})),t=Object(n.useRef)(),a=X("grid",e),c=Object(l.a)(a,2),o=c[0],u=c[1],f=X("score",0),v=Object(l.a)(f,2),b=v[0],E=v[1],_=X("bestScore",0),k=Object(l.a)(_,2),M=k[0],J=k[1],L=X("isBestScoreInCurrentGame",!1),R=Object(l.a)(L,2),I=R[0],A=R[1],T=X("lastTurnGrid",e),Y=Object(l.a)(T,2),B=Y[0],x=Y[1],F=X("lastTurnScore",0),H=Object(l.a)(F,2),P=H[0],q=H[1],K=X("modalIsOpen",!1),Q=Object(l.a)(K,2),V=Q[0],Z=Q[1],$=function(){A(!1),Z(!1),x(e),E(0);var t=N(e);!function(e){for(var t=0;t<2;){var a=new g;e[a.row][a.column].value||(e[a.row][a.column]=a,t++)}}(t),u(t)},ee=function(e){for(var t=0;t<4;t++)for(var a=0;a<4;a++){if(!e[t][a].value)return!1;e[t][a].className=""}return!0},te=Object(n.useCallback)((function(){(function(e){var t=D(N(e));return t=z(t),t=U(t),t=z(t),t=W(t),O(e,t)})(o)&&function(e){var t=N(e);return t=D(t),t=U(t),t=W(t),O(e,t)}(o)&&function(e){var t=z(N(e));return t=U(t),t=z(t),O(e,t)}(o)&&function(e){var t=N(e);return t=U(t),O(e,t)}(o)&&Z(!0)}),[o]);Object(n.useEffect)((function(){(function(e){for(var t=0;t<4;t++)for(var a=0;a<4;a++)if(e[t][a].value)return!1;return!0})(o)&&$()}),[o]);var ae=Object(n.useCallback)((function(e){e<=M||(J(e),A(!0))}),[M]);Object(n.useEffect)((function(){ee(o)&&te()}),[te,o,Z]),Object(n.useEffect)((function(){ae(b);var e=t.current,a=N(o),n=0,r=null,c=null,s=function(e){var t=function(e){return e.touches}(e)[0];r=t.clientX,c=t.clientY},m=function(e){if(e.preventDefault(),r&&c){var t=e.touches[0].clientX,s=e.touches[0].clientY,m=r-t,i=c-s;if(Math.abs(m)>Math.abs(i))if(m>0){var f=S(a,n),v=Object(l.a)(f,2);a=v[0],n=v[1]}else{var b=G(a,n),h=Object(l.a)(b,2);a=h[0],n=h[1]}else if(i>0){var d=y(a,n),p=Object(l.a)(d,2);a=p[0],n=p[1]}else{var N=C(a,n),E=Object(l.a)(N,2);a=E[0],n=E[1]}r=null,c=null,!O(o,a)&&j(a),x(o),u(a)}},i=function(e){38!==e.keyCode&&40!==e.keyCode||e.preventDefault(),38!==e.keyCode&&40!==e.keyCode&&37!==e.keyCode&&39!==e.keyCode||function(e){switch(e){case 38:var t=y(a,n),r=Object(l.a)(t,2);a=r[0],n=r[1];break;case 40:var c=C(a,n),s=Object(l.a)(c,2);a=s[0],n=s[1];break;case 37:var m=S(a,n),i=Object(l.a)(m,2);a=i[0],n=i[1];break;case 39:var f=G(a,n),v=Object(l.a)(f,2);a=v[0],n=v[1]}!O(o,a)&&!ee(a)&&j(a),q(b),E((function(e){return e+n})),x(o),u(a)}(e.keyCode)};return document.addEventListener("keydown",i),e.addEventListener("touchstart",s),e.addEventListener("touchmove",m),function(){document.removeEventListener("keydown",i),e.removeEventListener("touchstart",s),e.removeEventListener("touchmove",m)}}),[M,o,b]);return r.a.createElement("section",{className:"game"},r.a.createElement("header",{className:"game-header"},r.a.createElement("div",{className:"game-info"},r.a.createElement("h1",{className:"game-info__title"},"2048 Clone"),r.a.createElement(p,{score:b,bestScore:M})),r.a.createElement("div",{className:"buttons"},r.a.createElement(d,{handleUndoClick:function(){O(B,e)||(b===M&&I&&J(P),u(B),E(P))}}),r.a.createElement(m,{newGame:$,parent:"game-header"}))),r.a.createElement("main",{ref:t,className:"grid"},o.map((function(e,t){return e.map((function(e,a){return r.a.createElement(h,{key:s()(),cell:e,row:t,column:a})}))}))),r.a.createElement(i,{isOpen:V,newGame:$}))},F=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__para"},r.a.createElement("span",{className:"bold"},"HOW TO PLAY:")," Use your"," ",r.a.createElement("span",{className:"bold"},"arrow keys")," to move the tiles. When two tiles with the same number touch, they ",r.a.createElement("span",{className:"bold"},"merge into one!")),r.a.createElement("hr",{className:"footer__hr"}),r.a.createElement("p",{className:"footer__para"},"This game was created by"," ",r.a.createElement("a",{href:"http://gabrielecirulli.com/",target:"_blank",rel:"noopener noreferrer",className:"link bold"},"Gabriele Cirulli")," ","\u2014 original game"," ",r.a.createElement("a",{href:"http://git.io/2048",target:"_blank",rel:"noopener noreferrer",className:"link bold"},"website.")," ","I've just cloned the game for fun and testing my code skills."),r.a.createElement("hr",{className:"footer__hr"}),r.a.createElement("div",{className:"footer__links"},r.a.createElement("a",{href:"https://github.com/zronev/2048-clone",target:"_blank",rel:"noopener noreferrer",className:"button"},"Repo"),r.a.createElement("a",{href:"https://github.com/zronev",target:"_blank",rel:"noopener noreferrer",className:"button"},"Github profile")))};var H=function(){return r.a.createElement("div",{className:"main"},r.a.createElement(x,null),r.a.createElement(F,null))};a(19),a(20);o.a.render(r.a.createElement(H,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.298328df.chunk.js.map