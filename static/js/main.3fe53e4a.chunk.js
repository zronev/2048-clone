(this.webpackJsonp2048=this.webpackJsonp2048||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),l=a(1),u=function(e){var t=e.newGame,a=e.parent;return r.a.createElement("button",{onClick:t,className:"button button--new-game ".concat(a,"__restart")},"New Game")},s=function(e){var t=e.isOpen,a=e.newGame;return r.a.createElement("div",{className:"modal ".concat(t?"modal--open":"")},r.a.createElement("h3",{className:"modal__title"},"You lost..."),r.a.createElement(u,{newGame:a,parent:"modal"}))},i=function(e){var t=e.cell,a=t.value,n=t.className;return r.a.createElement("div",{className:"grid__cell grid__cell--".concat(n,"\n      ").concat(a>2&&a<=2048?"grid__cell--".concat(a):"","\n      ").concat(a>2048?"grid__cell--over-2048":"")},a||"")},m=function(e){var t=e.handleUndoClick;return r.a.createElement("button",{onClick:t,className:"button game-info__undo"},"Undo")},f=function(e){var t=e.score,a=e.bestScore;return r.a.createElement("div",{className:"score-bar"},r.a.createElement("span",{className:"score"},r.a.createElement("span",{className:"score__title"},"Score"),r.a.createElement("span",{className:"score__number"},t)),r.a.createElement("span",{className:"score score--best"},r.a.createElement("span",{className:"score__title"},"Best"),r.a.createElement("span",{className:"score__number"},a)))},v=function(e){return JSON.parse(JSON.stringify(e))},b=function(e,t){var a=e.map((function(e){return e.map((function(e){return e.value}))})),n=t.map((function(e){return e.map((function(e){return e.value}))}));return JSON.stringify(a)===JSON.stringify(n)},d=a(4),h=function e(){Object(d.a)(this,e),this.value=0,this.className="empty"},p=function e(){Object(d.a)(this,e),this.row=Math.floor(Math.random()*Math.floor(4)),this.column=Math.floor(Math.random()*Math.floor(4)),this.value=Math.random()>.9?4:2,this.className="emerged"},E=function(e){for(var t=0;t<1;){var a=new p;e[a.row][a.column].value||(e[a.row][a.column]=a,t++)}},N=a(2),O=a(3),g=function(e,t){var a=G(v(e)),n=t;a=C(a);var r=k(a,n),c=Object(l.a)(r,2);return a=c[0],n=c[1],a=C(a),[a=M(a),n]},_=function(e,t){var a=v(e),n=t;a=G(a);var r=k(a,n),c=Object(l.a)(r,2);return a=c[0],n=c[1],[a=M(a),n]},j=function(e,t){var a=C(v(e)),n=t,r=k(a,n),c=Object(l.a)(r,2);return a=c[0],n=c[1],[a=C(a),n]},w=function(e,t){var a=v(e),n=t,r=k(a,n),c=Object(l.a)(r,2);return[a=c[0],n=c[1]]},k=function(e,t){for(var a=v(e),n=t,r=0;r<4;r++){a[r]=y(a[r]);var c=S(a[r],n),o=Object(l.a)(c,2);a[r]=o[0],n=o[1],a[r]=y(a[r])}return[a,n]},y=function(e){var t=v(e);t=(t=t.filter((function(e){return e.value}))).map((function(e){return"merged"!==e.className?Object(O.a)({},e,{className:"moved"}):e}));var a=new Array(4-t.length).fill(new h(0));return t=[].concat(Object(N.a)(a),Object(N.a)(t))},S=function(e,t){for(var a=v(e),n=t,r=3;r>0;r--)a[r-1].value===a[r].value&&(a[r].value=2*a[r-1].value,a[r].className="merged",a[r-1].value=0,n+=a[r].value);return[a,n]},C=function(e){return v(e).map((function(e){return e.reverse()}))},G=function(e){for(var t=v(e),a=0;a<4;a++)for(var n=0;n<4;n++)t[a][n]=e[n][a];return t},M=function(e){var t=v(e);return t=G(t),t=G(t),t=G(t)},J=function(e){for(var t=v(e),a=0;a<4;a++)t[a]=L(t[a]),t[a]=I(t[a]),t[a]=L(t[a]);return t},L=function(e){var t=v(e);t=(t=t.filter((function(e){return e.value}))).map((function(e){return"merged"!==e.className?Object(O.a)({},e,{className:"moved"}):e}));var a=new Array(4-t.length).fill(new h(0));return t=[].concat(Object(N.a)(a),Object(N.a)(t))},I=function(e){for(var t=v(e),a=3;a>0;a--)t[a-1].value===t[a].value&&(t[a].value=2*t[a-1].value,t[a].className="merged",t[a-1].value=0);return t},A=function(e){return v(e).map((function(e){return e.reverse()}))},T=function(e){for(var t=v(e),a=0;a<4;a++)for(var n=0;n<4;n++)t[a][n]=e[n][a];return t},U=function(e){var t=v(e);return t=T(t),t=T(t),t=T(t)},Y=function(e,t){var a=Object(n.useState)((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return console.log(n),t}})),r=Object(l.a)(a,2),c=r[0],o=r[1];return[c,function(t){try{var a=t instanceof Function?t(c):t;o(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){console.log(n)}}]},B=function(){var e=Array(4).fill().map((function(){return Array(4).fill(new h(0))})),t=Object(n.useRef)(),a=Y("grid",e),c=Object(l.a)(a,2),o=c[0],d=c[1],N=Y("score",0),O=Object(l.a)(N,2),k=O[0],y=O[1],S=Y("bestScore",0),C=Object(l.a)(S,2),G=C[0],M=C[1],L=Y("isBestScoreInCurrentGame",!1),I=Object(l.a)(L,2),B=I[0],z=I[1],D=Y("lastTurnGrid",e),R=Object(l.a)(D,2),W=R[0],X=R[1],x=Y("lastTurnScore",0),F=Object(l.a)(x,2),H=F[0],P=F[1],q=Y("modalIsOpen",!1),K=Object(l.a)(q,2),Q=K[0],V=K[1],Z=Object(n.useCallback)((function(){z(!1),V(!1),X(e),y(0);var t=v(e);!function(e){for(var t=0;t<2;){var a=new p;e[a.row][a.column].value||(e[a.row][a.column]=a,t++)}}(t),d(t)}),[e,d,z,X,V,y]);Object(n.useEffect)((function(){(function(e){for(var t=0;t<4;t++)for(var a=0;a<4;a++)if(e[t][a].value)return!1;return!0})(o)&&Z()}),[o,Z]);var $=Object(n.useCallback)((function(e){e<=G||(M(e),z(!0))}),[G,M,z]);Object(n.useEffect)((function(){(function(e){for(var t=0;t<4;t++)for(var a=0;a<4;a++){if(!e[t][a].value)return!1;e[t][a].className=""}return!0})(o)&&function(e){var t=T(v(e));return t=A(t),t=J(t),t=A(t),t=U(t),b(e,t)}(o)&&function(e){var t=v(e);return t=T(t),t=J(t),t=U(t),b(e,t)}(o)&&function(e){var t=A(v(e));return t=J(t),t=A(t),b(e,t)}(o)&&function(e){var t=v(e);return t=J(t),b(e,t)}(o)&&V(!0)}),[o,V]),Object(n.useEffect)((function(){$(k);var e=t.current,a=v(o),n=0,r=null,c=null,u=function(e){var t=function(e){return e.touches}(e)[0];r=t.clientX,c=t.clientY},s=function(e){if(e.preventDefault(),r&&c){var t=e.touches[0].clientX,u=e.touches[0].clientY,s=r-t,i=c-u;if(Math.abs(s)>Math.abs(i))if(s>0){var m=j(a,n),f=Object(l.a)(m,2);a=f[0],n=f[1]}else{var v=w(a,n),h=Object(l.a)(v,2);a=h[0],n=h[1]}else if(i>0){var p=g(a,n),N=Object(l.a)(p,2);a=N[0],n=N[1]}else{var O=_(a,n),k=Object(l.a)(O,2);a=k[0],n=k[1]}r=null,c=null,!b(o,a)&&E(a),X(o),d(a)}},i=function(e){38!==e.keyCode&&40!==e.keyCode||e.preventDefault(),function(e){switch(e){case 38:var t=g(a,n),r=Object(l.a)(t,2);a=r[0],n=r[1];break;case 40:var c=_(a,n),u=Object(l.a)(c,2);a=u[0],n=u[1];break;case 37:var s=j(a,n),i=Object(l.a)(s,2);a=i[0],n=i[1];break;case 39:var m=w(a,n),f=Object(l.a)(m,2);a=f[0],n=f[1]}P(k),y((function(e){return e+n})),X(o),!b(o,a)&&E(a),d(a)}(e.keyCode)};return document.addEventListener("keydown",i),e.addEventListener("touchstart",u),e.addEventListener("touchmove",s),function(){document.removeEventListener("keydown",i),e.removeEventListener("touchstart",u),e.removeEventListener("touchmove",s)}}),[G,o,k,d,X,P,y,$]);return r.a.createElement("section",{className:"game"},r.a.createElement("header",{className:"game-header"},r.a.createElement("div",{className:"game-info"},r.a.createElement("h1",{className:"game-info__title"},"2048 Clone"),r.a.createElement(f,{score:k,bestScore:G})),r.a.createElement("div",{className:"buttons"},r.a.createElement(m,{handleUndoClick:function(){b(W,e)||(k===G&&B&&M(H),d(W),y(H))}}),r.a.createElement(u,{newGame:Z,parent:"game-header"}))),r.a.createElement("main",{ref:t,className:"grid"},o.map((function(e){return e.map((function(t,a){return r.a.createElement(i,{key:a,cell:t,row:e,column:a})}))}))),r.a.createElement(s,{isOpen:Q,newGame:Z}))},z=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__para"},r.a.createElement("span",{className:"bold"},"HOW TO PLAY:")," Use your"," ",r.a.createElement("span",{className:"bold"},"arrow keys")," to move the tiles. When two tiles with the same number touch, they ",r.a.createElement("span",{className:"bold"},"merge into one!")),r.a.createElement("hr",{className:"footer__hr"}),r.a.createElement("p",{className:"footer__para"},"This game was created by"," ",r.a.createElement("a",{href:"http://gabrielecirulli.com/",target:"_blank",rel:"noopener noreferrer",className:"link bold"},"Gabriele Cirulli")," ","\u2014 original game"," ",r.a.createElement("a",{href:"http://git.io/2048",target:"_blank",rel:"noopener noreferrer",className:"link bold"},"website.")," ","I've just cloned the game for fun and testing my code skills."),r.a.createElement("hr",{className:"footer__hr"}),r.a.createElement("div",{className:"footer__links"},r.a.createElement("a",{href:"https://github.com/zronev/2048-clone",target:"_blank",rel:"noopener noreferrer",className:"button"},"Repo"),r.a.createElement("a",{href:"https://github.com/zronev",target:"_blank",rel:"noopener noreferrer",className:"button"},"Github profile")))};var D=function(){return r.a.createElement("div",{className:"main"},r.a.createElement(B,null),r.a.createElement(z,null))};a(12),a(13);o.a.render(r.a.createElement(D,null),document.getElementById("root"))},7:function(e,t,a){e.exports=a(14)}},[[7,1,2]]]);
//# sourceMappingURL=main.3fe53e4a.chunk.js.map