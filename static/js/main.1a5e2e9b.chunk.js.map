{"version":3,"sources":["components/Header.js","components/Cell.js","components/NewGameButton.js","helpers/utility.js","helpers/game.js","components/Grid.js","App.js","index.js"],"names":["Header","className","Cell","value","NewGameButton","newGame","onClick","arrayClone","arr","JSON","parse","stringify","randomCell","this","row","Math","floor","random","column","Grid","inititalState","Array","fill","map","useState","grid","setGrid","useCallback","gridClone","count","cell","spawnTwoRandomCells","round","direction","hasMoveBeenMade","currentCell","distance","foundDistance","isEqual","spawnRandomCell","useEffect","handleKeyDown","e","keyCode","document","addEventListener","removeEventListener","index","key","App","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.1a5e2e9b.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Header = () => {\r\n  return (\r\n    <header className=\"header\">\r\n      <h1 className=\"header__title\">2048</h1>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header\r\n","import React from 'react'\r\n\r\nconst Cell = ({ value }) => {\r\n  return (\r\n    <div\r\n      className={`grid__cell \r\n      ${value ? '' : 'grid__cell--empty'} \r\n      ${value > 2 && value <= 2048 ? `grid__cell--${value}` : ''}\r\n      ${value > 2048 ? `grid__cell--over-2048` : ''}`}\r\n    >\r\n      {value ? value : ''}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Cell\r\n","import React from 'react'\r\n\r\nconst NewGameButton = ({ newGame }) => {\r\n  return (\r\n    <button onClick={newGame} className=\"button button--new-game game__button\">\r\n      New Game\r\n    </button>\r\n  )\r\n}\r\n\r\nexport default NewGameButton\r\n","export const arrayClone = arr => JSON.parse(JSON.stringify(arr)) // to deep clone matrix\r\n","class randomCell {\r\n  constructor() {\r\n    this.row = Math.floor(Math.random() * Math.floor(4))\r\n    this.column = Math.floor(Math.random() * Math.floor(4))\r\n    this.value = Math.random() > 0.9 ? 4 : 2\r\n  }\r\n}\r\n\r\nexport const spawnTwoRandomCells = grid => {\r\n  let count = 0\r\n  while (count < 2) {\r\n    const cell = new randomCell()\r\n\r\n    if (!grid[cell.row][cell.column]) {\r\n      grid[cell.row][cell.column] = cell.value\r\n      count++\r\n    }\r\n  }\r\n}\r\n\r\nexport const spawnRandomCell = grid => {\r\n  let count = 0\r\n  while (count < 1) {\r\n    const cell = new randomCell()\r\n\r\n    if (!grid[cell.row][cell.column]) {\r\n      grid[cell.row][cell.column] = cell.value\r\n      count++\r\n    }\r\n  }\r\n}\r\n\r\n\r\n","import React, { useState, useEffect, useCallback } from 'react'\r\nimport Cell from './Cell'\r\nimport NewGameButton from './NewGameButton'\r\nimport { arrayClone } from '../helpers/utility'\r\nimport { spawnTwoRandomCells, spawnRandomCell } from '../helpers/game'\r\n\r\nconst Grid = () => {\r\n  const inititalState = Array(4)\r\n    .fill()\r\n    .map(() => Array(4).fill(0))\r\n  const [grid, setGrid] = useState(inititalState)\r\n\r\n  // Key codes\r\n  const UP = 38\r\n  const DOWN = 40\r\n  const LEFT = 37\r\n  const RIGHT = 39\r\n\r\n  const newGame = useCallback(() => {\r\n    let gridClone = arrayClone(inititalState)\r\n    spawnTwoRandomCells(gridClone)\r\n    setGrid(gridClone)\r\n  }, [inititalState])\r\n\r\n  const round = (direction, grid) => {\r\n    let gridClone = arrayClone(grid)\r\n    let hasMoveBeenMade = false\r\n\r\n    switch (direction) {\r\n      case UP:\r\n        for (let row = 0; row < 4; row++) {\r\n          for (let column = 0; column < 4; column++) {\r\n            if (!gridClone[row][column]) continue\r\n            const currentCell = gridClone[row][column]\r\n            let distance = 0\r\n            let foundDistance = false\r\n\r\n            while (!foundDistance) {\r\n              let isOutBoundaries = row - (distance + 1) < 0\r\n              let doesntColliding =\r\n                !isOutBoundaries && !gridClone[row - (distance + 1)][column]\r\n\r\n              if (!doesntColliding) foundDistance = true\r\n              else distance++\r\n            }\r\n\r\n            let isOutBoundaries = row - (distance + 1) < 0\r\n            let isEqual =\r\n              !isOutBoundaries && gridClone[row - (distance + 1)][column] === currentCell\r\n\r\n            if (distance || isEqual) {\r\n              let isOutBoundaries = row - (distance + 1) < 0\r\n              let isEqual =\r\n                !isOutBoundaries &&\r\n                gridClone[row - (distance + 1)][column] === currentCell\r\n\r\n              if (isEqual) gridClone[row - (distance + 1)][column] = currentCell * 2\r\n              else gridClone[row - distance][column] = currentCell\r\n\r\n              gridClone[row][column] = 0\r\n              hasMoveBeenMade = true\r\n              if (isEqual) row = 0\r\n            }\r\n          }\r\n        }\r\n        break\r\n\r\n      case DOWN:\r\n        for (let row = 3; row > -1; row--) {\r\n          for (let column = 0; column < 4; column++) {\r\n            if (!gridClone[row][column]) continue\r\n            let distance = 0\r\n            let foundDistance = false\r\n\r\n            while (!foundDistance) {\r\n              let isOutBoundaries = row + (distance + 1) > 3\r\n              let doesntColliding =\r\n                !isOutBoundaries && !gridClone[row + (distance + 1)][column]\r\n\r\n              if (!doesntColliding) foundDistance = true\r\n              else distance++\r\n            }\r\n\r\n            let isOutBoundaries = row + (distance + 1) > 3\r\n            let isEqual =\r\n              !isOutBoundaries &&\r\n              gridClone[row + (distance + 1)][column] === gridClone[row][column]\r\n\r\n            if (distance || isEqual) {\r\n              let isOutBoundaries = row + (distance + 1) > 3\r\n              let isEqual =\r\n                !isOutBoundaries &&\r\n                gridClone[row + (distance + 1)][column] === gridClone[row][column]\r\n\r\n              if (isEqual)\r\n                gridClone[row + (distance + 1)][column] = gridClone[row][column] * 2\r\n              else gridClone[row + distance][column] = gridClone[row][column]\r\n\r\n              gridClone[row][column] = 0\r\n              hasMoveBeenMade = true\r\n              if (isEqual) row = 3\r\n            }\r\n          }\r\n        }\r\n        break\r\n\r\n      case LEFT:\r\n        for (let row = 0; row < 4; row++) {\r\n          for (let column = 0; column < 4; column++) {\r\n            if (!gridClone[row][column]) continue\r\n            let distance = 0\r\n            let foundDistance = false\r\n\r\n            while (!foundDistance) {\r\n              let isOutBoundaries = column - (distance + 1) < 0\r\n              let doesntColliding =\r\n                !isOutBoundaries && !gridClone[row][column - (distance + 1)]\r\n\r\n              if (!doesntColliding) foundDistance = true\r\n              else distance++\r\n            }\r\n\r\n            let isOutBoundaries = column - (distance + 1) < 0\r\n            let isEqual =\r\n              !isOutBoundaries &&\r\n              gridClone[row][column - (distance + 1)] === gridClone[row][column]\r\n\r\n            if (distance || isEqual) {\r\n              let isOutBoundaries = column - (distance + 1) < 0\r\n              let isEqual =\r\n                !isOutBoundaries &&\r\n                gridClone[row][column - (distance + 1)] === gridClone[row][column]\r\n\r\n              if (isEqual)\r\n                gridClone[row][column - (distance + 1)] = gridClone[row][column] * 2\r\n              else gridClone[row][column - distance] = gridClone[row][column]\r\n\r\n              gridClone[row][column] = 0\r\n              hasMoveBeenMade = true\r\n              if (isEqual) column = 0\r\n            }\r\n          }\r\n        }\r\n        break\r\n\r\n      case RIGHT:\r\n        for (let row = 3; row > -1; row--) {\r\n          for (let column = 0; column < 4; column++) {\r\n            if (!gridClone[row][column]) continue\r\n            let distance = 0\r\n            let foundDistance = false\r\n\r\n            while (!foundDistance) {\r\n              let isOutBoundaries = column + (distance + 1) > 3\r\n              let doesntColliding =\r\n                !isOutBoundaries && !gridClone[row][column + (distance + 1)]\r\n\r\n              if (!doesntColliding) foundDistance = true\r\n              else distance++\r\n            }\r\n\r\n            let isOutBoundaries = column + (distance + 1) > 3\r\n            let isEqual =\r\n              !isOutBoundaries &&\r\n              gridClone[row][column + (distance + 1)] === gridClone[row][column]\r\n\r\n            if (distance || isEqual) {\r\n              let isOutBoundaries = column + (distance + 1) > 3\r\n              let isEqual =\r\n                !isOutBoundaries &&\r\n                gridClone[row][column + (distance + 1)] === gridClone[row][column]\r\n\r\n              if (isEqual)\r\n                gridClone[row][column + (distance + 1)] = gridClone[row][column] * 2\r\n              else gridClone[row][column + distance] = gridClone[row][column]\r\n\r\n              gridClone[row][column] = 0\r\n              hasMoveBeenMade = true\r\n              if (isEqual) column = 3\r\n            }\r\n          }\r\n        }\r\n        break\r\n\r\n      default:\r\n        break\r\n    }\r\n\r\n    hasMoveBeenMade && spawnRandomCell(gridClone)\r\n    setGrid(gridClone)\r\n  }\r\n\r\n  useEffect(() => {\r\n    newGame()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = e => round(e.keyCode, grid)\r\n\r\n    document.addEventListener('keydown', handleKeyDown)\r\n    return () => document.removeEventListener('keydown', handleKeyDown)\r\n  }, [grid])\r\n\r\n  return (\r\n    <section className=\"game\">\r\n      <NewGameButton newGame={newGame} />\r\n      <main className=\"grid\">\r\n        {grid.map(row => row.map((cell, index) => <Cell key={index} value={cell} />))}\r\n      </main>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Grid\r\n","import React from 'react'\nimport Header from './components/Header'\nimport Grid from './components/Grid'\n\nfunction App() {\n  return (\n    <div className=\"main\">\n      <Header />\n      <Grid />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nimport 'normalize.css'\nimport './scss/style.scss'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}